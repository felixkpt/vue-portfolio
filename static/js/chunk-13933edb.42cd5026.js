(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13933edb"],{"4fc6":function(e,t){var n=[{path:"/redirect",component:"layout/Layout",hidden:!0,children:[{path:"/redirect/:path*",component:"views/redirect/index"}]},{path:"/login",component:"views/login/index",hidden:!0},{path:"/auth-redirect",component:"views/login/auth-redirect",hidden:!0},{path:"/404",component:"views/error-page/404",hidden:!0},{path:"/401",component:"views/error-page/401",hidden:!0}],r=[{path:"/permission",component:"layout/Layout",redirect:"/permission/index",alwaysShow:!0,meta:{title:"Permission",icon:"lock",roles:["admin","editor"]},children:[{path:"page",component:"views/permission/page",name:"PagePermission",meta:{title:"Page Permission",roles:["admin"]}},{path:"directive",component:"views/permission/directive",name:"DirectivePermission",meta:{title:"Directive Permission"}},{path:"role",component:"views/permission/role",name:"RolePermission",meta:{title:"Role Permission",roles:["admin"]}}]},{path:"/tab",component:"layout/Layout",children:[{path:"index",component:"views/tab/index",name:"Tab",meta:{title:"Tab",icon:"tab"}}]},{path:"/error",component:"layout/Layout",redirect:"noRedirect",name:"ErrorPages",meta:{title:"Error Pages",icon:"404"},children:[{path:"401",component:"views/error-page/401",name:"Page401",meta:{title:"Page 401",noCache:!0}},{path:"404",component:"views/error-page/404",name:"Page404",meta:{title:"Page 404",noCache:!0}}]},{path:"/error-log",component:"layout/Layout",redirect:"noRedirect",children:[{path:"log",component:"views/error-log/index",name:"ErrorLog",meta:{title:"Error Log",icon:"bug"}}]},{path:"/excel",component:"layout/Layout",redirect:"/excel/export-excel",name:"Excel",meta:{title:"Excel",icon:"excel"},children:[{path:"export-excel",component:"views/excel/export-excel",name:"ExportExcel",meta:{title:"Export Excel"}},{path:"export-selected-excel",component:"views/excel/select-excel",name:"SelectExcel",meta:{title:"Select Excel"}},{path:"export-merge-header",component:"views/excel/merge-header",name:"MergeHeader",meta:{title:"Merge Header"}},{path:"upload-excel",component:"views/excel/upload-excel",name:"UploadExcel",meta:{title:"Upload Excel"}}]},{path:"/zip",component:"layout/Layout",redirect:"/zip/download",alwaysShow:!0,meta:{title:"Zip",icon:"zip"},children:[{path:"download",component:"views/zip/index",name:"ExportZip",meta:{title:"Export Zip"}}]},{path:"/pdf",component:"layout/Layout",redirect:"/pdf/index",children:[{path:"index",component:"views/pdf/index",name:"PDF",meta:{title:"PDF",icon:"pdf"}}]},{path:"/pdf/download",component:"views/pdf/download",hidden:!0},{path:"/theme",component:"layout/Layout",redirect:"noRedirect",children:[{path:"index",component:"views/theme/index",name:"Theme",meta:{title:"Theme",icon:"theme"}}]},{path:"/clipboard",component:"layout/Layout",redirect:"noRedirect",children:[{path:"index",component:"views/clipboard/index",name:"ClipboardDemo",meta:{title:"Clipboard Demo",icon:"clipboard"}}]},{path:"/i18n",component:"layout/Layout",children:[{path:"index",component:"views/i18n-demo/index",name:"I18n",meta:{title:"I18n",icon:"international"}}]},{path:"*",redirect:"/404",hidden:!0}];e.exports={constantRoutes:n,asyncRoutes:r}},"8d55":function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"b",(function(){return m}));var r=n("2909"),i=(n("99af"),n("b775")),o=n("ed08"),a=o.deepClone,s=n("4fc6"),c=s.asyncRoutes,l=s.constantRoutes;a([].concat(Object(r["a"])(l),Object(r["a"])(c)));function d(){return Object(i["a"])({url:"/admin/settings/permissiongroups/routes",method:"get"})}function u(){return Object(i["a"])({url:"/admin/settings/permissiongroups",method:"get"})}function p(e){return Object(i["a"])({url:"/admin/settings/permissiongroups",method:"post",data:e})}function h(e,t){return Object(i["a"])({url:"/admin/settings/permissiongroups/".concat(e),method:"put",data:t})}function m(e){return Object(i["a"])({url:"/admin/settings/permissiongroups/".concat(e),method:"delete"})}},bea4:function(e,t,n){},d458:function(e,t,n){"use strict";n("bea4")},eb72:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleAddRole}},[e._v("New Role")]),n("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.rolesList,border:""}},[n("el-table-column",{attrs:{align:"center",label:"Role Slug",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.slug)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"Role Name",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),n("el-table-column",{attrs:{align:"header-center",label:"Description"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.description)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"Operations"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.handleEdit(t)}}},[e._v("Edit")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return e.handleDelete(t)}}},[e._v("Delete")])]}}])})],1),n("el-dialog",{attrs:{visible:e.dialogVisible,title:"edit"===e.dialogType?"Edit Role":"New Role"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{attrs:{model:e.role,"label-width":"80px","label-position":"left"}},[n("el-form-item",{attrs:{label:"Name"}},[n("el-input",{attrs:{name:"name",placeholder:"Role Name"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),n("el-form-item",{attrs:{label:"Desc"}},[n("el-input",{attrs:{name:"description",autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"Role Description"},model:{value:e.role.description,callback:function(t){e.$set(e.role,"description",t)},expression:"role.description"}})],1),n("el-form-item",{attrs:{label:"Menus"}},[n("el-tree",{ref:"tree",staticClass:"permission-tree",attrs:{name:"permissions","check-strictly":e.checkStrictly,"auto-expand-parent":!0,"default-expand-all":!0,data:e.routesData,"node-key":"path",props:e.defaultProps,"show-checkbox":""}})],1)],1),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmRole}},[e._v("Confirm")])],1)],1)],1)},i=[];n("a4d3"),n("b64b");function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function a(e,t){if(null==e)return{};var n,r,i=o(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=n("b85c"),c=n("5530"),l=n("2909"),d=n("c7eb"),u=n("1da1"),p=(n("99af"),n("d3b7"),n("159b"),n("ac1f"),n("5319"),n("a434"),n("caad"),n("2532"),n("e01a"),n("b0c0"),n("4de4"),n("df7c")),h=n.n(p),m=n("ed08"),g=n("8d55"),f=["permissions","slugs"],b={id:"",slug:"",name:"",description:"",routes:[]},v={data:function(){return{role:Object.assign({},b),routes:[],permissions:[],rolesList:[],dialogVisible:!1,dialogType:"new",checkStrictly:!1,defaultProps:{children:"children",label:"title"}}},computed:{routesData:function(){return this.routes}},created:function(){this.getRoutes(),this.getRoles()},methods:{getRoutes:function(){var e=this;return Object(u["a"])(Object(d["a"])().mark((function t(){var n,r;return Object(d["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["d"])();case 2:n=t.sent,e.serviceRoutes=n.data,r=e.generateRoutes(n.data,"/"),e.routes=r,e.permissions=[];case 7:case"end":return t.stop()}}),t)})))()},getRoles:function(){var e=this;return Object(u["a"])(Object(d["a"])().mark((function t(){var n;return Object(d["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["c"])();case 2:n=t.sent,e.rolesList=n.data;case 4:case"end":return t.stop()}}),t)})))()},generateRoutes:function(e){var t=[];for(var n in e){var r,i=e[n];if(!i.hidden){var o={path:i.path,slug:i.slug,methods:i.methods,title:i.title,children:[]},a=[];if((null===(r=i.routes)||void 0===r?void 0:r.length)>0&&(a=this.childrenWithRoutes(i.routes,!0),o.children=a),delete i.routes,i.children&&Object.keys(i.children).length>0){var s=this.generateRoutes(i.children);o.children=[].concat(Object(l["a"])(o.children),Object(l["a"])(s))}t.push(o)}}return t},childrenWithRoutes:function(e){var t=[];for(var n in e){var r,i=e[n];if((null===(r=i.routes)||void 0===r?void 0:r.length)>0){var o=this.generateRoutes(i.routes,!0);i.children=o}delete i.routes,t.push(i)}return this.generateRoutes(t)},generatePermissions:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",r=[],i=function(){if(o.hidden)return"continue";var e={path:h.a.resolve(n,o.path),slug:o.slug};if(r.push({path:e.path,slug:e.slug}),o.children){var i=[];o.children.forEach((function(t){var n=h.a.resolve(e.path+"/"+t.path,""),r=(e.slug+"."+t.slug).replace(/\.+/g,".");i.push(Object(c["a"])(Object(c["a"])({},t),{},{path:n,slug:r}))})),r.push.apply(r,Object(l["a"])(t.generatePermissions(i,e.path)))}};for(var o in e)i();return r},generateArr:function(e){var t=this,n=[];return e.forEach((function(e){if(n.push(e),e.children){var r=t.generateArr(e.children);r.length>0&&(n=[].concat(Object(l["a"])(n),Object(l["a"])(r)))}})),n},handleAddRole:function(){this.role=Object.assign({},b),this.$refs.tree&&this.$refs.tree.setCheckedNodes([]),this.dialogType="new",this.dialogVisible=!0},handleEdit:function(e){var t=this;this.dialogType="edit",this.dialogVisible=!0,this.checkStrictly=!1,this.role=Object(m["deepClone"])(e.row),this.$nextTick((function(){var e=JSON.parse(t.role.routes),n=[];e.forEach((function(e){n.push({path:e})})),t.$refs.tree.setCheckedNodes(n),t.checkStrictly=!1}))},handleDelete:function(e){var t=this,n=e.$index,r=e.row;this.$confirm("Confirm to remove the role?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(Object(u["a"])(Object(d["a"])().mark((function e(){var i;return Object(d["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(g["b"])(r._id);case 2:i=e.sent,"success"===i.type?(t.rolesList.splice(n,1),t.$message({type:"success",message:i.message})):t.$message({type:"error",message:i.message});case 4:case"end":return e.stop()}}),e)})))).catch((function(e){console.error(e)}))},generateTree:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",r=arguments.length>2?arguments[2]:void 0,i=[],o=Object(s["a"])(e);try{for(o.s();!(t=o.n()).done;){var a=t.value,c=h.a.resolve(n,a.path);a.children&&(a.children=this.generateTree(a.children,c,r)),(r.includes(c)||a.children&&a.children.length>=1)&&i.push(a)}}catch(l){o.e(l)}finally{o.f()}return i},getCheckedRoutes:function(e,t){var n=this,r=[],i=function(){var i=e[o];t.some((function(e){return e===i.path}))&&r.push({path:i.path,slug:i.slug}),i.children&&r.push.apply(r,Object(l["a"])(n.getCheckedRoutes(i.children,t)))};for(var o in e)i();return r},confirmRole:function(){var e=this;return Object(u["a"])(Object(d["a"])().mark((function t(){var n,r,i,o,s,c,l,u,p,h,m,b;return Object(d["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n="edit"===e.dialogType,r=e.$refs.tree.getCheckedKeys(),i=e.getCheckedRoutes(e.routes,r),e.role.routes=i,!n){t.next=19;break}return o=e.role,o.permissions,o.slugs,s=a(o,f),t.next=8,Object(g["e"])(e.role._id,s);case 8:e.getRoles(),c=0;case 10:if(!(c<e.rolesList.length)){t.next=17;break}if(e.rolesList[c]._id!==e.role._id){t.next=14;break}return e.rolesList.splice(c,1,Object.assign({},e.role)),t.abrupt("break",17);case 14:c++,t.next=10;break;case 17:t.next=25;break;case 19:return t.next=21,Object(g["a"])(e.role);case 21:l=t.sent,u=l.data,e.role.slug=u.slug,e.rolesList.push(e.role);case 25:p=e.role,h=p.description,m=p.slug,b=p.name,e.dialogVisible=!1,e.$notify({title:"Success",dangerouslyUseHTMLString:!0,message:"\n            <div>Role Slug: ".concat(m,"</div>\n            <div>Role Name: ").concat(b,"</div>\n            <div>Description: ").concat(h,"</div>\n          "),type:"success"});case 28:case"end":return t.stop()}}),t)})))()},onlyOneShowingChild:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=null,r=e.filter((function(e){return!e.hidden}));return 1===r.length?(n=r[0],n.path=h.a.resolve(t.path,n.path),n):0===r.length&&(n=Object(c["a"])(Object(c["a"])({},t),{},{path:"",noShowingChildren:!0}),n)}}},x=v,y=(n("d458"),n("2877")),w=Object(y["a"])(x,r,i,!1,null,"3e78cbe6",null);t["default"]=w.exports}}]);