(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af1e4f10"],{"377b":function(e,t,n){},"4fc6":function(e,t){var n=[{path:"/redirect",component:"layout/Layout",hidden:!0,children:[{path:"/redirect/:path*",component:"views/redirect/index"}]},{path:"/login",component:"views/login/index",hidden:!0},{path:"/auth-redirect",component:"views/login/auth-redirect",hidden:!0},{path:"/404",component:"views/error-page/404",hidden:!0},{path:"/401",component:"views/error-page/401",hidden:!0}],r=[{path:"/permission",component:"layout/Layout",redirect:"/permission/index",alwaysShow:!0,meta:{title:"Permission",icon:"lock",roles:["admin","editor"]},children:[{path:"page",component:"views/permission/page",name:"PagePermission",meta:{title:"Page Permission",roles:["admin"]}},{path:"directive",component:"views/permission/directive",name:"DirectivePermission",meta:{title:"Directive Permission"}},{path:"role",component:"views/permission/role",name:"RolePermission",meta:{title:"Role Permission",roles:["admin"]}}]},{path:"/tab",component:"layout/Layout",children:[{path:"index",component:"views/tab/index",name:"Tab",meta:{title:"Tab",icon:"tab"}}]},{path:"/error",component:"layout/Layout",redirect:"noRedirect",name:"ErrorPages",meta:{title:"Error Pages",icon:"404"},children:[{path:"401",component:"views/error-page/401",name:"Page401",meta:{title:"Page 401",noCache:!0}},{path:"404",component:"views/error-page/404",name:"Page404",meta:{title:"Page 404",noCache:!0}}]},{path:"/error-log",component:"layout/Layout",redirect:"noRedirect",children:[{path:"log",component:"views/error-log/index",name:"ErrorLog",meta:{title:"Error Log",icon:"bug"}}]},{path:"/excel",component:"layout/Layout",redirect:"/excel/export-excel",name:"Excel",meta:{title:"Excel",icon:"excel"},children:[{path:"export-excel",component:"views/excel/export-excel",name:"ExportExcel",meta:{title:"Export Excel"}},{path:"export-selected-excel",component:"views/excel/select-excel",name:"SelectExcel",meta:{title:"Select Excel"}},{path:"export-merge-header",component:"views/excel/merge-header",name:"MergeHeader",meta:{title:"Merge Header"}},{path:"upload-excel",component:"views/excel/upload-excel",name:"UploadExcel",meta:{title:"Upload Excel"}}]},{path:"/zip",component:"layout/Layout",redirect:"/zip/download",alwaysShow:!0,meta:{title:"Zip",icon:"zip"},children:[{path:"download",component:"views/zip/index",name:"ExportZip",meta:{title:"Export Zip"}}]},{path:"/pdf",component:"layout/Layout",redirect:"/pdf/index",children:[{path:"index",component:"views/pdf/index",name:"PDF",meta:{title:"PDF",icon:"pdf"}}]},{path:"/pdf/download",component:"views/pdf/download",hidden:!0},{path:"/theme",component:"layout/Layout",redirect:"noRedirect",children:[{path:"index",component:"views/theme/index",name:"Theme",meta:{title:"Theme",icon:"theme"}}]},{path:"/clipboard",component:"layout/Layout",redirect:"noRedirect",children:[{path:"index",component:"views/clipboard/index",name:"ClipboardDemo",meta:{title:"Clipboard Demo",icon:"clipboard"}}]},{path:"/i18n",component:"layout/Layout",children:[{path:"index",component:"views/i18n-demo/index",name:"I18n",meta:{title:"I18n",icon:"international"}}]},{path:"*",redirect:"/404",hidden:!0}];e.exports={constantRoutes:n,asyncRoutes:r}},"79f6":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleAddUser}},[e._v("New User")]),n("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.usersList,border:""}},[n("el-table-column",{attrs:{align:"center",label:"User Name",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"User Email",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.email)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"User Phone"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.phone)+" ")]}}])}),n("el-table-column",{attrs:{align:"header-center",label:"Permission Group"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.permission_group)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"Operations"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.handleEdit(t)}}},[e._v("Edit")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return e.handleDelete(t)}}},[e._v("Delete")])]}}])})],1),n("el-dialog",{attrs:{visible:e.dialogVisible,title:"edit"===e.dialogType?"Edit User":"New User"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{attrs:{model:e.user,"label-width":"80px","label-position":"left"}},[n("el-form-item",{attrs:{label:"Name"}},[n("el-input",{attrs:{placeholder:"User Name"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),n("el-form-item",{attrs:{label:"Email"}},[n("el-input",{attrs:{placeholder:"User Email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),n("el-form-item",{attrs:{label:"Phone"}},[n("el-input",{attrs:{placeholder:"User Phone"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),n("el-form-item",{attrs:{label:"Permission Group"}},[n("el-input",{attrs:{placeholder:"Permission Group"},model:{value:e.user.permission_group,callback:function(t){e.$set(e.user,"permission_group",t)},expression:"user.permission_group"}})],1)],1),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmUser}},[e._v("Confirm")])],1)],1)],1)},i=[],o=n("5530"),a=n("c7eb"),s=n("1da1"),c=(n("d81d"),n("a434"),n("a4d3"),n("e01a"),n("b0c0"),n("99af"),n("4de4"),n("d3b7"),n("df7c")),l=n.n(c),u=n("ed08"),d=n("b775");function p(){return Object(d["a"])({url:"/admin/settings/users/list",method:"get"})}function m(e){return Object(d["a"])({url:"/users/user/profile",method:"post",data:e})}function h(e){return console.log(e),Object(d["a"])({url:"/auth/user/roles",method:"post"})}function f(e){return console.log(e),Object(d["a"])({url:"/auth/user/roles",method:"post"})}var g=n("8d55"),b={id:"",name:"",email:"",phone:"",permission_group:""},v={data:function(){return{user:Object.assign({},b),usersList:[],permission_group:[],dialogVisible:!1,dialogType:"new",checkStrictly:!1,defaultProps:{children:"children",label:"title"}}},computed:{permissionGroupData:function(){return this.permission_group}},created:function(){this.getUsers(),this.getPermissionGroups()},methods:{getUsers:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){var n;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:n=t.sent,e.usersList=n.data;case 4:case"end":return t.stop()}}),t)})))()},getPermissionGroups:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){var n;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["c"])();case 2:n=t.sent,e.serviceRoutes=n.data,e.routes=e.generateRoutes(n.data);case 5:case"end":return t.stop()}}),t)})))()},handleAddUser:function(){this.user=Object.assign({},b),this.$refs.tree&&this.$refs.tree.setCheckedNodes([]),this.dialogType="new",this.dialogVisible=!0},handleEdit:function(e){var t=this;this.dialogType="edit",this.dialogVisible=!0,this.checkStrictly=!0,this.user=Object(u["deepClone"])(e.row),this.$nextTick((function(){var e=JSON.parse(t.user.routes).map((function(e){return{path:e}}));t.$refs.tree.setCheckedNodes(e),t.checkStrictly=!1}))},handleDelete:function(e){var t=this,n=e.$index,r=e.row;this.$confirm("Confirm to remove the user?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(Object(s["a"])(Object(a["a"])().mark((function e(){var i;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f(r._id);case 2:i=e.sent,"success"===i.type?(t.usersList.splice(n,1),t.$message({type:"success",message:i.message})):t.$message({type:"error",message:i.message});case 4:case"end":return e.stop()}}),e)})))).catch((function(e){console.error(e)}))},confirmUser:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){var n,r,i,o,s,c,l,d,p,f;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n="edit"===e.dialogType,r=e.$refs.tree.getCheckedKeys(),e.user.routes=e.generateTree(Object(u["deepClone"])(e.serviceRoutes),"/",r),i=e.routesToUsers(e.user.routes),e.user.routes=i,!n){t.next=18;break}return t.next=8,h(e.user._id,e.user);case 8:o=0;case 9:if(!(o<e.usersList.length)){t.next=16;break}if(e.usersList[o]._id!==e.user._id){t.next=13;break}return e.usersList.splice(o,1,Object.assign({},e.user)),t.abrupt("break",16);case 13:o++,t.next=9;break;case 16:t.next=24;break;case 18:return t.next=20,m(e.user);case 20:s=t.sent,c=s.data,e.user.slug=c.slug,e.usersList.push(e.user);case 24:l=e.user,d=l.description,p=l.slug,f=l.name,e.dialogVisible=!1,e.$notify({title:"Success",dangerouslyUseHTMLString:!0,message:"\n            <div>User Slug: ".concat(p,"</div>\n            <div>User Name: ").concat(f,"</div>\n            <div>Description: ").concat(d,"</div>\n          "),type:"success"});case 27:case"end":return t.stop()}}),t)})))()},onlyOneShowingChild:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=null,r=e.filter((function(e){return!e.hidden}));return 1===r.length?(n=r[0],n.path=l.a.resolve(t.path,n.path),n):0===r.length&&(n=Object(o["a"])(Object(o["a"])({},t),{},{path:"",noShowingChildren:!0}),n)}}},x=v,w=(n("c833"),n("2877")),y=Object(w["a"])(x,r,i,!1,null,"0c8985f2",null);t["default"]=y.exports},"8d55":function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"b",(function(){return h}));var r=n("2909"),i=(n("99af"),n("b775")),o=n("ed08"),a=o.deepClone,s=n("4fc6"),c=s.asyncRoutes,l=s.constantRoutes;a([].concat(Object(r["a"])(l),Object(r["a"])(c)));function u(){return Object(i["a"])({url:"/admin/settings/permissiongroups/routes",method:"get"})}function d(){return Object(i["a"])({url:"/admin/settings/permissiongroups",method:"get"})}function p(e){return Object(i["a"])({url:"/admin/settings/permissiongroups",method:"post",data:e})}function m(e,t){return Object(i["a"])({url:"/admin/settings/permissiongroups/".concat(e),method:"put",data:t})}function h(e){return Object(i["a"])({url:"/admin/settings/permissiongroups/".concat(e),method:"delete"})}},c833:function(e,t,n){"use strict";n("377b")}}]);